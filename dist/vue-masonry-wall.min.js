var VueMasonryWall=function(e,t,n,i){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var a=new(r(i).default),l=function(e){for(var t=[],n=0;n<e;n++)t.push({i:n,indexes:[]});return t},d={name:"VueMasonryWall",directives:{"observe-visibility":n.ObserveVisibility},props:{items:{type:Array,required:!0},options:{type:Object,required:!1},ssr:{type:Object,required:!1}},data:function(){var e=this.ssr&&this.ssr.columns;if(e>0){for(var t=l(e),n=0;n<this.items.length;n++)t[n%e].indexes.push(n);return{columns:t,cursor:this.items.length,ready:!1}}return{columns:[],cursor:0,ready:!1}},mounted:function(){var e=this;this.$resize=function(){e.columns.length!==e._columnSize()&&e.redraw()},this.$resize(),window.addEventListener("resize",this.$resize),this.delegatedRedraw()},beforeDestroy:function(){window.removeEventListener("resize",this.$resize)},computed:{_options:function(){var e=this.options;return{width:e&&e.width||300,padding:{default:e&&e.padding&&e.padding.default||12},throttle:e&&e.throttle||300}},_style:function(){var e=this.options&&this.options.padding;return e&&"number"!=typeof e&&(e=this.options.padding[this.columns.length]||this._options.padding.default),{wall:{margin:"-".concat(e,"px")},lane:{paddingLeft:"".concat(e,"px"),paddingRight:"".concat(e,"px")},item:{paddingTop:"".concat(e,"px"),paddingBottom:"".concat(e,"px")}}}},methods:{redraw:function(){var e;this.ready=!1,this.columns.splice(0),this.cursor=0,(e=this.columns).push.apply(e,o(l(this._columnSize()))),this.ready=!0,this._fill()},_columnSize:function(){var e=Math.round(this.$refs.wall.scrollWidth/this._options.width);return e<1?1:e},_fill:function(){var e=this;this.ready&&(this.cursor>=this.items.length?this.$emit("append"):this.$nextTick((function(){var n=t.maxBy(e.$refs.bottom,(function(e){return e.clientHeight||0}));e._addItem(n.dataset.column),e._fill()})))},_addItem:function(e){var t=this.columns[e];this.items[this.cursor]&&(t.indexes.push(this.cursor),this.cursor++)},delegatedRedraw:function(){var e=this;a.$on("redrawEvents",(function(){e.redraw()}))}}};function c(e,t,n,i,r,o,s,a,l,d){"boolean"!=typeof s&&(l=a,a=s,s=!1);const c="function"==typeof n?n.options:n;let u;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,r&&(c.functional=!0)),i&&(c._scopeId=i),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=u):t&&(u=s?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),u)if(c.functional){const e=c.render;c.render=function(t,n){return u.call(n),e(t,n)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,u):[u]}return n}const u="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function f(e){return(e,t)=>function(e,t){const n=u?t.media||"default":e,i=p[n]||(p[n]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),void 0===m&&(m=document.head||document.getElementsByTagName("head")[0]),m.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(n),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,t=document.createTextNode(n),r=i.element.childNodes;r[e]&&i.element.removeChild(r[e]),r.length?i.element.insertBefore(t,r[e]):i.element.appendChild(t)}}}(e,t)}let m;const p={};var h=c({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wall",staticClass:"masonry-wall",class:{ready:e.ready},style:e._style.wall},e._l(e.columns,(function(t,i){return n("div",{key:i,staticClass:"masonry-column",style:e._style.lane},[e._l(t.indexes,(function(t){return n("div",{key:t,ref:"item_"+t,refInFor:!0,staticClass:"masonry-item",style:e._style.item},[e._t("default",[e._v(e._s(e.items[t]))],{item:e.items[t],index:t})],2)})),e._v(" "),n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:function(t){return t&&e._fill()},throttle:e._options.throttle},expression:"{callback: (v) => v && _fill(),throttle:_options.throttle}"}],ref:"bottom",refInFor:!0,staticClass:"masonry-bottom",attrs:{"data-column":i}})],2)})),0)},staticRenderFns:[]},(function(e){e&&e("data-v-426986af_0",{source:".masonry-wall[data-v-426986af]{display:flex}.masonry-wall[data-v-426986af]:not(.ready){opacity:0}.masonry-column[data-v-426986af]{flex-grow:1;flex-basis:0;display:flex;flex-direction:column}.masonry-bottom[data-v-426986af]{flex-grow:1;margin-top:-300px;padding-top:300px;min-height:100px}",map:void 0,media:void 0})}),d,"data-v-426986af",!1,void 0,!1,f,void 0,void 0),y=function(e){y.installed||(y.installed=!0,e.component("VueMasonryWall",h))},v={install:y},_=null;return"undefined"!=typeof window?_=window.Vue:"undefined"!=typeof global&&(_=global.Vue),_&&_.use(v),h.install=y,e.default=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({},lodash,vueObserveVisibility,Vue);